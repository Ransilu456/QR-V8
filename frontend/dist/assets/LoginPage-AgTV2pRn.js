var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,o=(e,t)=>{for(var s in t||(t={}))r.call(t,s)&&i(e,s,t[s]);if(a)for(var s of a(t))l.call(t,s)&&i(e,s,t[s]);return e},n=(e,a)=>t(e,s(a)),d=(e,t,s)=>new Promise(((a,r)=>{var l=e=>{try{o(s.next(e))}catch(t){r(t)}},i=e=>{try{o(s.throw(e))}catch(t){r(t)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,i);o((s=s.apply(e,t)).next())}));import{r as c,c as m,u,j as x,b as h,L as p,A as b}from"./vendor-D1DNIM4c.js";import{T as g,u as f,a as v}from"./index-B9AZMt1L.js";import{A as y,h as w}from"./ui-CfGEgmeW.js";const j=()=>x.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:[x.jsx(h.div,{className:"absolute top-[5%] left-[10%] w-[600px] h-[600px] rounded-full bg-blue-200 dark:bg-blue-900 opacity-20 dark:opacity-10 blur-[150px]",animate:{scale:[1,1.1,1],opacity:[.15,.2,.15],x:[0,20,0],y:[0,-20,0]},transition:{repeat:1/0,duration:15,ease:"easeInOut"}}),x.jsx(h.div,{className:"absolute bottom-[10%] right-[5%] w-[500px] h-[500px] rounded-full bg-indigo-300 dark:bg-indigo-800 opacity-20 dark:opacity-10 blur-[120px]",animate:{scale:[1,1.2,1],opacity:[.1,.15,.1],x:[0,-20,0],y:[0,20,0]},transition:{repeat:1/0,duration:12,ease:"easeInOut",delay:2}}),x.jsx(h.div,{className:"absolute top-1/2 left-1/2 w-[800px] h-[800px] -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-br from-blue-300/5 to-purple-300/5 dark:from-blue-900/5 dark:to-purple-900/5 blur-[100px]",animate:{rotate:360},transition:{repeat:1/0,duration:40,ease:"linear"}})]}),N=()=>{const{theme:e}=f(),t="dark"===e,[s,a]=c.useState({email:"",password:""}),[r,l]=c.useState({email:!1,password:!1}),[i,N]=c.useState({}),[k,C]=c.useState(!1),[S,A]=c.useState(!1),[P,M]=c.useState(!1),[O,$]=c.useState(0),{isAuthenticated:z,login:B}=v(),E=m(),R=u();c.useEffect((()=>{var e,t;if(z){const s=(null==(t=null==(e=R.state)?void 0:e.from)?void 0:t.pathname)||"/dashboard";E(s,{replace:!0})}}),[z,E,R]);const{loading:V,error:H,setError:L}=((e,t={})=>{const{onSuccess:s,onError:a,successMessage:r}=t,[l,i]=c.useState(!1),[o,n]=c.useState(null);return{loading:l,error:o,setError:n,handleSubmit:(t,l)=>d(void 0,null,(function*(){var o,d,c,m,u,x,h;t.preventDefault();try{i(!0),n(null);const t=yield e(l);return r&&g.success(r),s&&s(t),t}catch(p){let e;throw t.preventDefault(),e=p.response?(null==(o=p.response)?void 0:o.status)>=500?"Server error. Please try again later.":400===(null==(d=p.response)?void 0:d.status)?(null==(m=null==(c=p.response)?void 0:c.data)?void 0:m.message)||"Please check your information and try again.":401===(null==(u=p.response)?void 0:u.status)?"Authentication error. Please log in again.":(null==(h=null==(x=p.response)?void 0:x.data)?void 0:h.message)||"An error occurred. Please try again.":"Network error. Please check your internet connection.",n(e),g.error(e),a&&a(p,e),p}finally{i(!1)}}))}})((e=>d(void 0,null,(function*(){var t;try{return yield B(e.email,e.password),!0}catch(s){if(429===(null==(t=s.response)?void 0:t.status)){const e=s.response.headers["retry-after"]||60;throw M(!0),$(e),new Error(`Too many login attempts. Please try again in ${I(e)}.`)}throw s}}))),{onSuccess:()=>{var e,t;const s=(null==(t=null==(e=R.state)?void 0:e.from)?void 0:t.pathname)||"/dashboard";E(s,{replace:!0})}});c.useEffect((()=>{var e;(null==(e=R.state)?void 0:e.message)&&(g.info(R.state.message),E(R.pathname,{replace:!0,state:{}}))}),[R,E]),c.useEffect((()=>{H&&L("")}),[s,H,L]),c.useEffect((()=>{let e;return O>0?e=setInterval((()=>{$((e=>e-1))}),1e3):0===O&&M(!1),()=>clearInterval(e)}),[O]);const I=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,T=e=>{const{name:t,value:s,type:l,checked:i}=e.target,d="checkbox"===l?i:s;a((e=>n(o({},e),{[t]:d}))),r[t]&&W(t,d)},F=e=>{const{name:t,value:s}=e.target;l((e=>n(o({},e),{[t]:!0}))),W(t,s)},W=(e,t)=>{let s=o({},i);switch(e){case"email":t.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?delete s.email:s.email="Please enter a valid email address":s.email="Email is required";break;case"password":t?t.length<6?s.password="Password must be at least 6 characters":delete s.password:s.password="Password is required"}return N(s),!s[e]},q=[{name:"Google",color:t?"bg-slate-700":"bg-white",textColor:t?"text-white":"text-gray-700",hoverColor:t?"hover:bg-slate-600":"hover:bg-gray-50",icon:x.jsx("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:x.jsx("path",{fill:"currentColor",d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"})})},{name:"Facebook",color:"bg-blue-600",textColor:"text-white",hoverColor:"hover:bg-blue-700",icon:x.jsx("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:x.jsx("path",{fill:"currentColor",d:"M20.9,2H3.1A1.1,1.1,0,0,0,2,3.1V20.9A1.1,1.1,0,0,0,3.1,22h9.58V14.25h-2.6v-3h2.6V9a3.64,3.64,0,0,1,3.88-4,20.26,20.26,0,0,1,2.33.12v2.7H17.3c-1.26,0-1.5.6-1.5,1.47v1.93h3l-.39,3H15.8V22h5.1A1.1,1.1,0,0,0,22,20.9V3.1A1.1,1.1,0,0,0,20.9,2Z"})})},{name:"Apple",color:"bg-black",textColor:"text-white",hoverColor:"hover:bg-gray-900",icon:x.jsx("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:x.jsx("path",{fill:"currentColor",d:"M16.5,3A5.37,5.37,0,0,0,13,4.59,4.63,4.63,0,0,0,11.5,9a4.1,4.1,0,0,0,3.5-1.5A4.77,4.77,0,0,0,16.5,3ZM12,6.5a4.79,4.79,0,0,0-4,2A6.51,6.51,0,0,0,7,13.5c0,2,1,4.5,2,5.5,1.5,1.5,2.5,1.5,3.5,1.5a5.86,5.86,0,0,0,3-1.5A5.83,5.83,0,0,0,18,17.5a5.86,5.86,0,0,0-3-1.5,5.86,5.86,0,0,0-3,1.5,5.86,5.86,0,0,0,3,1.5c1,0,2,0,3.5-1.5,1-1,2-3.5,2-5.5a6.51,6.51,0,0,0-1-5A4.79,4.79,0,0,0,12,6.5Z"})})}],D={hidden:{y:20,opacity:1},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},Z={shake:{x:[0,-10,10,-10,10,0],transition:{duration:.5}},visible:D.visible};return x.jsxs(h.div,{className:`min-h-screen ${t?"bg-gradient-to-br from-gray-900 via-slate-800 to-gray-800":"bg-gradient-to-br from-blue-50 via-sky-50 to-cyan-100"} py-6 sm:py-8 md:py-12 px-4 sm:px-6 md:px-8 flex items-center justify-center`,variants:{hidden:{opacity:1},visible:{opacity:1,transition:{duration:.5,when:"beforeChildren",staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[x.jsx(j,{}),x.jsxs("div",{className:"max-w-5xl w-full flex flex-col md:flex-row rounded-xl shadow-2xl overflow-hidden "+(t?"bg-slate-800":"bg-white"),children:[x.jsxs("div",{className:"w-full md:w-3/5 lg:w-1/2 p-6 sm:p-8 md:p-10",children:[x.jsxs(h.div,{variants:D,className:"mb-6 sm:mb-8",children:[x.jsxs(p,{to:"/",className:`flex items-center text-sm font-medium text-blue-600 hover:text-blue-500 ${t?"text-blue-400 hover:text-blue-300":""} mb-6`,children:[x.jsx(y,{className:"w-4 h-4 mr-1"}),"Back to Home"]}),x.jsx("h2",{className:`text-2xl sm:text-3xl font-extrabold ${t?"text-white":"text-gray-900"} mb-2`,children:"Sign in to your account"}),x.jsx("p",{className:"text-sm "+(t?"text-gray-300":"text-gray-600"),children:"Welcome back! Please enter your details"})]}),H&&x.jsx("div",{className:`rounded-md ${t?"bg-red-900/30 border-red-800":"bg-red-50 border-red-200"} p-3 sm:p-4 border mb-4 sm:mb-6`,children:x.jsxs("div",{className:"flex",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(w,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),x.jsxs("div",{className:"ml-3",children:[x.jsx("h3",{className:"text-sm font-medium "+(t?"text-red-300":"text-red-800"),children:"Authentication Error"}),x.jsx("div",{className:"mt-1 text-sm "+(t?"text-red-300":"text-red-700"),children:x.jsx("p",{children:H.message})})]})]})}),x.jsxs(h.form,{className:"space-y-4 sm:space-y-6",onSubmit:e=>d(void 0,null,(function*(){var t,a,r,i,o;if(e.preventDefault(),(()=>{let e=!0;return Object.keys(s).forEach((t=>{W(t,s[t])||(e=!1)})),l({email:!0,password:!0}),e})())try{M(!0),yield B(s.email,s.password,S);const e=(null==(a=null==(t=R.state)?void 0:t.from)?void 0:a.pathname)||"/dashboard";E(e,{replace:!0})}catch(n){if(429===(null==(r=n.response)?void 0:r.status)){const e=parseInt(n.response.headers["retry-after"])||60;$(e),g.warning(`Too many login attempts. Please try again in ${I(e)}.`)}401===(null==(i=n.response)?void 0:i.status)&&g.error("Invalid email or password. Please try again."),429!==(null==(o=n.response)?void 0:o.status)&&M(!1)}else g.error("Please fix the errors in the form before submitting")})),initial:"hidden",animate:Object.keys(i).length>0&&Object.values(r).some((e=>e))?"shake":"visible",variants:Z,children:[x.jsxs(h.div,{variants:D,children:[x.jsx("label",{htmlFor:"email",className:"block mb-1.5 sm:mb-2 text-sm font-medium "+(t?"text-gray-300":"text-gray-900"),children:"Email address"}),x.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:T,onBlur:F,className:`${t?"bg-slate-700 border-slate-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900"} border text-sm rounded-lg block w-full p-2.5 ${r.email&&i.email?t?"bg-red-900/30 border-red-600 text-red-300 placeholder-red-400 focus:ring-red-500 focus:border-red-500":"bg-red-50 border-red-500 text-red-900 placeholder-red-700 focus:ring-red-500 focus:border-red-500":"focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"you@example.com"}),x.jsx(b,{children:r.email&&i.email&&x.jsx(h.p,{className:"mt-1 sm:mt-2 text-xs sm:text-sm "+(t?"text-red-400":"text-red-600"),initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:i.email})})]}),x.jsxs(h.div,{variants:D,children:[x.jsx("label",{htmlFor:"password",className:"block mb-1.5 sm:mb-2 text-sm font-medium "+(t?"text-gray-300":"text-gray-900"),children:"Password"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{id:"password",name:"password",type:k?"text":"password",autoComplete:"current-password",required:!0,value:s.password,onChange:T,onBlur:F,className:`${t?"bg-slate-700 border-slate-600 text-white placeholder-gray-400":"bg-gray-50 border-gray-300 text-gray-900"} border text-sm rounded-lg block w-full p-2.5 ${r.password&&i.password?t?"bg-red-900/30 border-red-600 text-red-300 placeholder-red-400 focus:ring-red-500 focus:border-red-500":"bg-red-50 border-red-500 text-red-900 placeholder-red-700 focus:ring-red-500 focus:border-red-500":"focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"••••••••"}),x.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center "+(t?"text-gray-300 hover:text-gray-200":"text-gray-400 hover:text-gray-500"),onClick:()=>C(!k),children:k?x.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),x.jsx("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]}):x.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[x.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),x.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})})]}),x.jsx(b,{children:r.password&&i.password&&x.jsx(h.p,{className:"mt-1 sm:mt-2 text-xs sm:text-sm "+(t?"text-red-400":"text-red-600"),initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:i.password})})]}),x.jsxs(h.div,{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-0",variants:D,children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:S,onChange:()=>A(!S),className:`w-4 h-4 rounded ${t?"bg-slate-700 border-slate-600 focus:ring-blue-600":"bg-gray-50 border-gray-300 focus:ring-blue-300"} focus:ring-3`}),x.jsx("label",{htmlFor:"remember-me",className:"ml-2 text-sm font-medium "+(t?"text-gray-300":"text-gray-900"),children:"Remember me"})]}),x.jsx("div",{className:"text-sm",children:x.jsx(p,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:"Forgot your password?"})})]}),x.jsx(h.div,{variants:D,children:x.jsx(h.button,{type:"submit",disabled:V||Object.keys(i).length>0||P,className:"group relative flex w-full justify-center rounded-md bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 py-2.5 sm:py-3 px-4 text-sm font-semibold text-white shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600 disabled:opacity-50 transition-all duration-300 "+(V||Object.keys(i).length>0||P?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),whileHover:{scale:1.02,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},whileTap:{scale:.98},children:V?x.jsxs("span",{className:"flex items-center",children:[x.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):P?x.jsxs("span",{className:"flex items-center",children:[x.jsx("svg",{className:"mr-2 h-4 w-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Try again in ",I(O)]}):x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:x.jsx("svg",{className:"h-5 w-5 text-blue-300 group-hover:text-blue-200",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:x.jsx("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})})}),"Sign in"]})})})]}),x.jsxs("div",{className:"mt-6 sm:mt-8",children:[x.jsxs(h.div,{variants:D,className:"relative",children:[x.jsx("div",{className:"absolute inset-0 flex items-center",children:x.jsx("div",{className:"w-full border-t "+(t?"border-gray-700":"border-gray-300")})}),x.jsx("div",{className:"relative flex justify-center text-sm",children:x.jsx("span",{className:(t?"bg-slate-800 text-gray-400":"bg-white text-gray-500")+" px-3 sm:px-4",children:"Or continue with"})})]}),x.jsx(h.div,{className:"mt-4 sm:mt-6 grid grid-cols-1 sm:grid-cols-3 gap-3",variants:D,children:q.map((e=>x.jsxs(h.button,{type:"button",className:`${e.color} ${e.textColor} ${e.hoverColor} flex w-full items-center justify-center rounded-md px-3 py-2 text-sm font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${t?"focus:ring-offset-slate-800":""}`,whileHover:{scale:1.03},whileTap:{scale:.97},children:[e.icon,e.name]},e.name)))})]})]}),x.jsxs("div",{className:"hidden md:block md:w-2/5 lg:w-1/2 bg-gradient-to-br from-blue-600 to-cyan-600 p-8 md:p-10 lg:p-12 text-white relative overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:x.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[x.jsx("defs",{children:x.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:x.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"white",strokeWidth:"0.5"})})}),x.jsx("rect",{width:"100",height:"100",fill:"url(#grid)"})]})}),x.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[x.jsxs("div",{children:[x.jsx(h.h2,{className:"text-2xl md:text-3xl font-bold mb-4 md:mb-6 text-white",initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.8},children:"Welcome to Attendance System"}),x.jsx(h.p,{className:"text-blue-100 mb-6 md:mb-8 max-w-md text-sm md:text-base",initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4,duration:.8},children:"Sign in to access our powerful attendance tracking system. Manage students, generate reports, and gain valuable insights."}),x.jsx(h.div,{className:"space-y-3 md:space-y-4",initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.6,duration:.8},children:["Track student attendance in real-time","Generate comprehensive reports","Manage student records efficiently","QR code scanning functionality","Secure and easy to use interface"].map(((e,t)=>x.jsxs("div",{className:"flex items-center",children:[x.jsx("svg",{className:"h-5 w-5 text-blue-300 mr-2 flex-shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}),x.jsx("span",{className:"text-sm md:text-base",children:e})]},t)))})]}),x.jsxs(h.div,{className:"mt-auto text-xs md:text-sm text-blue-200",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:1,duration:.8},children:[x.jsx("p",{children:"© 2025 Attendance System. All rights reserved."}),x.jsx("p",{className:"mt-1",children:"Powered by Ransilu Samarasekara."})]})]})]})]})]})};export{N as default};
