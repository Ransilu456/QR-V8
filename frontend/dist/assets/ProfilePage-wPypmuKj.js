var e=Object.defineProperty,s=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,l=(s,r,a)=>r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a,o=(e,s)=>{for(var r in s||(s={}))t.call(s,r)&&l(e,r,s[r]);if(a)for(var r of a(s))d.call(s,r)&&l(e,r,s[r]);return e},n=(e,a)=>s(e,r(a)),i=(e,s,r)=>new Promise(((a,t)=>{var d=e=>{try{o(r.next(e))}catch(s){t(s)}},l=e=>{try{o(r.throw(e))}catch(s){t(s)}},o=e=>e.done?a(e.value):Promise.resolve(e.value).then(d,l);o((r=r.apply(e,s)).next())}));import{r as m,j as c,b as x}from"./vendor-D1DNIM4c.js";import{a as u,d as g,T as b}from"./index-B9AZMt1L.js";import"./ui-CfGEgmeW.js";const h=()=>{const{user:e,updateProfile:s}=u(),[r,a]=m.useState(!1),[t,d]=m.useState({name:"",email:"",role:""}),[l,h]=m.useState({currentPassword:"",newPassword:"",confirmPassword:""});m.useEffect((()=>{e&&d({name:e.name||"",email:e.email||"",role:e.role||""})}),[e]);const p=e=>{const{name:s,value:r}=e.target;d((e=>n(o({},e),{[s]:r})))},w=e=>{const{name:s,value:r}=e.target;h((e=>n(o({},e),{[s]:r})))};return c.jsxs("div",{className:"py-4 sm:py-6",children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:c.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white",children:"Profile Settings"})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-4 sm:mt-6",children:c.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[c.jsxs(x.div,{className:"bg-white dark:bg-slate-800 shadow overflow-hidden sm:rounded-lg transition-colors duration-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[c.jsxs("div",{className:"px-4 py-4 sm:py-5 sm:px-6 bg-gray-50 dark:bg-slate-700 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h3",{className:"text-base sm:text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Profile Information"}),c.jsx("p",{className:"mt-1 max-w-2xl text-xs sm:text-sm text-gray-500 dark:text-gray-300",children:"Update your personal details"})]}),c.jsx("div",{className:"px-4 py-4 sm:py-5 sm:p-6",children:c.jsxs("form",{onSubmit:e=>i(void 0,null,(function*(){var r,d;e.preventDefault();try{a(!0);const e=yield g.updateProfile(t);if(e.data&&(e.data.user||e.data.admin)){const r=e.data.user||e.data.admin;s(r),b.success("Profile updated successfully")}else b.error("Received invalid response from server")}catch(l){b.error((null==(d=null==(r=l.response)?void 0:r.data)?void 0:d.message)||"Failed to update profile")}finally{a(!1)}})),className:"space-y-4 sm:space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200",children:"Full Name"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:t.name,onChange:p,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full text-xs sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-slate-700 dark:text-white rounded-md"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200",children:"Email Address"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:p,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full text-xs sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-slate-700 dark:text-white rounded-md"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"role",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200",children:"Role"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"role",name:"role",type:"text",disabled:!0,value:t.role,className:"bg-gray-50 dark:bg-slate-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full text-xs sm:text-sm border-gray-300 dark:border-gray-700 dark:text-gray-300 rounded-md cursor-not-allowed"})}),c.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Role cannot be changed"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",disabled:r,className:"inline-flex items-center px-3 py-1.5 sm:px-4 sm:py-2 border border-transparent text-xs sm:text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-slate-800 transition-colors duration-200",children:r?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-3 w-3 sm:h-4 sm:w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Profile"})})]})})]}),c.jsxs(x.div,{className:"bg-white dark:bg-slate-800 shadow overflow-hidden sm:rounded-lg transition-colors duration-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[c.jsxs("div",{className:"px-4 py-4 sm:py-5 sm:px-6 bg-gray-50 dark:bg-slate-700 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h3",{className:"text-base sm:text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Change Password"}),c.jsx("p",{className:"mt-1 max-w-2xl text-xs sm:text-sm text-gray-500 dark:text-gray-300",children:"Update your password"})]}),c.jsx("div",{className:"px-4 py-4 sm:py-5 sm:p-6",children:c.jsxs("form",{onSubmit:e=>i(void 0,null,(function*(){var s,r;if(e.preventDefault(),l.newPassword===l.confirmPassword)if(l.newPassword.length<8)b.error("Password must be at least 8 characters long");else try{a(!0),yield g.updatePassword({currentPassword:l.currentPassword,newPassword:l.newPassword}),b.success("Password changed successfully"),h({currentPassword:"",newPassword:"",confirmPassword:""})}catch(t){b.error((null==(r=null==(s=t.response)?void 0:s.data)?void 0:r.message)||"Failed to change password")}finally{a(!1)}else b.error("New passwords do not match")})),className:"space-y-4 sm:space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"currentPassword",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200",children:"Current Password"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"currentPassword",name:"currentPassword",type:"password",required:!0,value:l.currentPassword,onChange:w,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full text-xs sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-slate-700 dark:text-white rounded-md"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200",children:"New Password"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:l.newPassword,onChange:w,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full text-xs sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-slate-700 dark:text-white rounded-md"})}),c.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Password must be at least 8 characters"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-200",children:"Confirm New Password"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:l.confirmPassword,onChange:w,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full text-xs sm:text-sm border-gray-300 dark:border-gray-600 dark:bg-slate-700 dark:text-white rounded-md"})})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{type:"submit",disabled:r,className:"inline-flex items-center px-3 py-1.5 sm:px-4 sm:py-2 border border-transparent text-xs sm:text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-slate-800 transition-colors duration-200",children:r?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-3 w-3 sm:h-4 sm:w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Changing..."]}):"Change Password"})})]})})]})]})})]})};export{h as default};
